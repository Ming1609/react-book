<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>中文输入法 - composition</title>
    <link rel="stylesheet" href="../static/typo.css" >
</head>
<body>
<div id="demo"></div>
<script src="../static/es5-shim.min.js"></script>
<script src="../static/es5-sham.min.js"></script>
<script src="../static/console-polyfill.js"></script>
<script src="../static/classnames.js"></script>
<script src="../static/react.js"></script>
<script src="../static/react-dom.js"></script>
<script src="../static/JSXTransformer.js"></script>
<script type="text/jsx">
var App = React.createClass({
    getInitialState: function () {
        return {
            changeText: '',
            compositionText: '',
            compositionIng: false
        }
    },
    input1OnChange: function (e) {
        this.setState({
            changeText: e.target.value
        })
    },
    input2OnCompositionEnd: function (e) {
        this.setState({
            compositionIng: false
        })
    },
    input2OnCompositionStart: function (e) {
        this.setState({
            compositionIng: true
        })
    },
    input2OnChange: function (e) {
        if (!this.state.compositionIng) {
            this.setState({
                compositionText: e.target.value
            })
        }
    },
    render: function () {
        return (
            <div>
            changeText: {this.state.changeText}
            <br />
            <input onChange={this.input1OnChange} placeholder="用中文输入法输入" />
            <hr />
            compositionText: {this.state.compositionText}
            <br />
            <input onChange={this.input2OnChange} onCompositionStart={this.input2OnCompositionStart} onCompositionEnd={this.input2OnCompositionEnd} placeholder="用中文输入法输入" />
            </div>
        )
    }
})




ReactDOM.render(<App />, document.getElementById('demo'))
</script>
</body>
</html>
