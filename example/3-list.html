<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
<style>
.remove {
    color:red;
    margin-left: 20px;
}
.remove:hover {
    cursor: pointer;
}
</style>
</head>
<body>
显示列表和删除列表
<div id="demo"></div>

<script src="../static/es5-shim.min.js"></script>
<script src="../static/es5-sham.min.js"></script>
<script src="../static/console-polyfill.js"></script>
<script src="../static/classnames.js"></script>
<script src="../static/react.js"></script>
<script src="../static/react-dom.js"></script>
<script src="../static/JSXTransformer.js"></script>

<script type="text/jsx">

var Item = React.createClass({
    render: function () {
        var self = this
        return (
            <li onClick={this.props.remove} >{self.props.text}<span className="remove" data-id={self.props.id}>X</span></li>
        )
    }
})
var Demo = React.createClass({
    getInitialState: function () {
        var self = this
        return {
            data: self.props.data
        }
    },
    removeChild: function (event) {
        var self = this
        var id = parseInt(event.target.getAttribute('data-id'), 10)
        var data = self.state.data
        var newData = []
        data.map(function (target) {
            if (target.id !== id) {
                newData.push(target)
            }
        })
        self.setState({
            data: newData
        })
    },
    render: function () {
        var self = this
        var nodes = self.state.data.map(function (target) {
            return (
                    <Item {...target} key={target.id} remove={self.removeChild} />
            )
        })
        // 必须有元素包裹，否则会报错（此处是使用 div 包裹）
        return (
            <div>
            {nodes}
            </div>
        )
    }
})
var data = [
    {
        text: 'HTML',
        id: 1
    },
    {
        text: 'CSS',
        id: 2
    },
    {
        text: 'JavaScript',
        id: 3
    }
]
ReactDOM.render(<Demo data={data} />, document.getElementById('demo'))
</script>
</body>
</html>